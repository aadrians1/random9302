(window.cbJsonP=window.cbJsonP||[]).push([[80],{306:function(t,e,n){"use strict";n.r(e);var i=n(3),a=n.n(i),o=n(9),s=n.n(o),r=n(36),c=n.n(r),u=n(12),h=n.n(u),l=n(2),p=n.n(l),f=n(4),v=n.n(f),d=(n(23),n(19)),g=[{name:"portal",actions:[{name:"logout",method:"post",endpoint:"/api/internal/ssp_users/logout",headers:{"X-Requested-With":"XMLHttpRequest"}}]},{name:"js_info",actions:[{name:"retrieve",method:"get",headers:{"X-Requested-With":"XMLHttpRequest"},endpoint:function(){return"/api/internal/"+Object(d.c)()+"/retrieve_js_info"},static:!0}]},{name:"locale",actions:[{name:"retrieve",method:"get",headers:{"X-Requested-With":"XMLHttpRequest"},endpoint:function(t){return"/api/internal/cbjs/"+Object(d.c)()+"/translations?locale="+t.languageCode},static:!0}]}],m=n(15),y=n(106),b=n(20),j=(v()(k,[{key:"init",value:function(){return this.apiClient.addApis(g),this.hpData={},this.getInfo()}},{key:"getInfo",value:function(){var e=this;return this.info?h.a.resolve(this.info):this.apiClient.js_info.retrieve().then(function(t){return e.info=t}).then(function(t){return t.recaptcha_site_key&&(e.commMgr.recaptchaKey=t.recaptcha_site_key,e.commMgr.initialize()),t}).catch(function(t){return e.info={site:e.config.site},h.a.resolve(e.info)})}},{key:"syncTranslations",value:function(t){Object(b.i)(t)}},{key:"getTranslations",value:function(t){var e=this,n=0<arguments.length&&void 0!==t?t:{},i=Object(b.h)(n.locale),a=n.languageCode,o=Object(b.e)();return i?o[i]?h.a.resolve(o[i]):this.apiClient.locale.retrieve({languageCode:a}).then(function(t){return e.syncTranslations(t),t}).catch(function(t){var e=new m.a(t);throw y.a.error(e),e}):h.a.resolve(o)}},{key:"getHpData",value:function(t){return t&&c()(this.hpData[t])?s()({},t,this.hpData[t]):t?{}:this.hpData}},{key:"portalLogout",value:function(){var t=this;return this.hpData.jwt?this.apiClient.portal.logout({},{token:this.hpData.jwt}).then(function(){return{success:!(t.hpData.jwt="")}}):h.a.resolve({success:!1})}},{key:"setHpData",value:function(e){var n=this;return a()(e).map(function(t){c()(e[t])&&(n.hpData[t]=e[t])}),h.a.resolve({acknowledged:!0})}}]),k);function k(t){p()(this,k),this.config={site:t.site,hostname:t.hostName,publishableKey:t.publishableKey},this.apiClient=t.apiClient,this.iframeClient=t.connectionClient,this.commMgr=t}e.default=j}}]);
//# sourceMappingURL=80-4db565a24924543bf00b.js.map